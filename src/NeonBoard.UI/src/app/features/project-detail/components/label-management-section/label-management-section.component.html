<section class="grid grid-cols-[220px_1fr] gap-12">
  <div>
    <h2 class="text-base font-semibold text-primary">Labels</h2>
    <p class="text-sm text-muted mt-1">Manage labels for cards on this board.</p>
  </div>

  <div class="space-y-6">
    @if (facade.sortedLabels().length) {
      <div class="space-y-3">
        @for (label of facade.sortedLabels(); track label.id) {
          <app-label-list-item
            [label]="label"
            [isEditing]="editingLabelId() === label.id"
            [isSaving]="isSavingLabel()"
            (edit)="startEdit($event)"
            (save)="saveEdit($event)"
            (delete)="openDeleteModal($event)"
            (cancel)="cancelEdit()" />
        }
      </div>
    } @else {
      <p class="text-sm text-muted">No labels yet. Create your first label below.</p>
    }

    <div class="bg-surface border border-dim rounded-lg p-4">
      <h4 class="text-sm font-medium text-primary mb-3">Add new label</h4>
      <div class="flex items-end gap-3">
        <div class="flex-1">
          <label for="new-label-name" class="block text-xs text-muted mb-1">Name</label>
          <input
            id="new-label-name"
            type="text"
            [ngModel]="newLabelName()"
            (ngModelChange)="newLabelName.set($event)"
            (keyup.enter)="addLabel()"
            placeholder="e.g. Bug, Feature, Urgent..."
            maxlength="50"
            class="w-full px-2 py-1.5 text-sm bg-void text-primary placeholder:text-muted border border-dim rounded-lg focus:outline-none focus:border-accent focus:ring-2 focus:ring-accent/20 transition-colors" />
        </div>
        <app-button
          variant="primary"
          size="sm"
          [disabled]="isAddingLabel() || !newLabelName().trim()"
          (click)="addLabel()">
          {{ isAddingLabel() ? 'Adding...' : 'Add' }}
        </app-button>
      </div>

      <div class="mt-3">
        <label class="block text-xs text-muted mb-1.5">Color</label>
        <div class="flex gap-2">
          @for (color of labelColors; track color) {
            <button
              (click)="newLabelColor.set(color)"
              [class]="'w-6 h-6 rounded-full transition-all ' + getColorSwatchClass(color) +
                (newLabelColor() === color ? ' ring-2 ring-white/50 scale-110' : ' opacity-60 hover:opacity-100')"
              [attr.aria-label]="'Select ' + color + ' color'"></button>
          }
        </div>
      </div>
    </div>
  </div>
</section>

<app-confirmation-modal
  [open]="showDeleteModal()"
  title="Delete Label"
  message="Are you sure you want to delete this label? It will be removed from all cards. This action cannot be undone."
  confirmText="Delete Label"
  variant="danger"
  gradientVariant="pink"
  (confirm)="confirmDelete()"
  (cancel)="closeDeleteModal()" />
