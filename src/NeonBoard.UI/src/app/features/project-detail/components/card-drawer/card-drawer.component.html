<app-drawer [open]="open()" (close)="onClose()">
  <div class="space-y-6">
    <div>
      <h2 class="text-lg font-semibold text-primary">{{ drawerTitle }}</h2>
      <p class="text-[13px] text-muted mt-1">
        {{ isEditMode ? 'Update the card details' : 'Add a new card to the column' }}
      </p>
    </div>

    <!-- Error message -->
    @if (error) {
      <div class="px-4 py-3 bg-red-500/10 border border-red-500/20 rounded-lg">
        <p class="text-sm text-red-400">{{ error }}</p>
      </div>
    }

    <div class="space-y-4">
      <div>
        <label class="block text-[13px] text-secondary mb-1.5">Title</label>
        <input
          type="text"
          [(ngModel)]="cardTitle"
          placeholder="Enter card title..."
          class="w-full px-3 py-2 text-[13px] bg-surface text-primary placeholder:text-muted border border-dim rounded-lg hover:border-secondary/30 focus:outline-none focus:border-accent focus:ring-2 focus:ring-accent/20 transition-colors duration-150"
        />
      </div>

      <div>
        <label class="block text-[13px] text-secondary mb-1.5">Description (optional)</label>
        <textarea
          [(ngModel)]="cardDescription"
          placeholder="Add more details..."
          rows="4"
          class="w-full px-3 py-2 text-[13px] bg-surface text-primary placeholder:text-muted border border-dim rounded-lg hover:border-secondary/30 focus:outline-none focus:border-accent focus:ring-2 focus:ring-accent/20 transition-colors duration-150 resize-none"
        ></textarea>
      </div>
    </div>

    <div class="flex gap-3 pt-4 border-t border-subtle">
      <app-button
        variant="primary"
        (click)="saveCard()"
        [disabled]="isSaving || isDeleting || !cardTitle.trim()">
        {{ isSaving ? 'Saving...' : (isEditMode ? 'Save Changes' : 'Add Card') }}
      </app-button>

      @if (isEditMode) {
        <app-button
          variant="danger"
          (click)="deleteCard()"
          [disabled]="isSaving || isDeleting">
          {{ isDeleting ? 'Deleting...' : 'Delete' }}
        </app-button>
      }

      <app-button
        variant="secondary"
        (click)="onClose()"
        [disabled]="isSaving || isDeleting">
        Cancel
      </app-button>
    </div>
  </div>
</app-drawer>
