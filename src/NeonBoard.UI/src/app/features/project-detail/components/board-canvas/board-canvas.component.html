@if (isLoading() && !board()) {
  <div class="flex-1 flex items-center justify-center">
    <div class="text-center">
      <div class="inline-block w-8 h-8 border-4 border-accent/20 border-t-accent rounded-full animate-spin mb-4"></div>
      <p class="text-sm text-muted">Loading board...</p>
    </div>
  </div>
} @else if (error() && !board()) {
  <div class="flex-1 flex items-center justify-center">
    <div class="text-center max-w-md">
      <div class="w-12 h-12 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-6 h-6 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
        </svg>
      </div>
      <h3 class="text-sm font-medium text-primary mb-2">{{ error() }}</h3>
      <p class="text-sm text-muted">Please try refreshing the page</p>
    </div>
  </div>
} @else if (board()) {
  <main class="flex-1 p-6 overflow-x-auto overflow-y-hidden" [ngStyle]="cardHeightStyle()">
    <div
      cdkDropList
      cdkDropListOrientation="horizontal"
      [cdkDropListData]="columns()"
      (cdkDropListDropped)="dropColumn($event)"
      class="flex gap-6 min-w-max h-full items-start"
    >
      <div cdkDropListGroup class="contents">
        @for (column of columns(); track column.id; let i = $index) {
          <app-column
            [column]="column"
            [cards]="cardsByColumn()[column.id]"
            [columnIds]="columnIds()"
            [accentClass]="getAccentClass(i)"
            (cardDropped)="onCardDropped($event, column.id)"
            (columnRenamed)="onColumnRenamed($event)"
            (columnDeleted)="onColumnDeleted($event)"
            (cardSelected)="onCardSelected($event)"
            (cardAdded)="onCardAdded($event)"
            (cardDragStarted)="onCardDragStarted($event)"
          ></app-column>
        }
      </div>

      <app-add-column-button
        [isAdding]="isAddingColumn()"
        [columnName]="newColumnName()"
        (openAdd)="openAddColumn()"
        (cancelAdd)="cancelAddColumn()"
        (addColumn)="addColumn($event)"
        (nameChange)="onColumnNameChange($event)"
      ></app-add-column-button>
    </div>
  </main>
}
